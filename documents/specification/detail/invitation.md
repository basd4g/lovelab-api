# 4.2.3. 招待に関する操作 <各エンドポイントの仕様>

[エンドポイントのもくじに戻る](index.md)

## 新しい招待を作成

既にグループに所属しているユーザのみ実行可能

リクエストを送信したユーザが招待者(inviter)となり、inviterの所属するグループへの招待を作成する。

inviterとinvitee(被招待者)が同一にはなれない。

inviteeは必ずグループに所属していない(groupid=null)である必要がある

| 認証の有無 | HTTPメソッド | URI末尾 |
----|----|----
| 有り | POST | `/authed/invitations` |

### リクエストbody

| キー | データ型 | 必須/任意 | 説明 |
----|----|----|----
| inviteeuserid | 数字 | 必須 | 招待相手のユーザid |
| message | 文字列 | 任意 | 招待相手に見せたいメッセージ |

### レスポンスbody

| キー | データ型 | 説明 |
----|----|----
| message | 文字列またはnull | 招待相手に見せるメッセージ |
| id | 数字 | 招待id |
| groupid | 数字 | 招待先のグループ |
| inviteruserid | 数字 | 招待者(既にグループに加入している人)のユーザid |
| inviteeuserid | 数字 | 被招待者(まだグループに加入していない人)のユーザid |
| updateAt | 文字列 | この招待レコードが更新された日時を表す タイムゾーンなし |
| createdAt | 文字列 | この招待レコードが作成された日時を表す タイムゾーンなし |

### サーバ内の状態変化

新しいトークンのレコードが発行・追加される

## 自分への招待をすべて取得

| 認証の有無 | HTTPメソッド | URI末尾 |
----|----|----
| 有り | GET | `/authed/invitations` |

### リクエストbody

無し

### レスポンスbody

以下のオブジェクトの配列(長さ0以上)が返る

該当するものがないときは長さ0の配列`[]`が返る

| キー | データ型 | 説明 |
----|----|----
| message | 文字列またはnull | 招待相手に見せるメッセージ |
| id | 数字 | 招待id |
| groupid | 数字 | 招待先のグループ |
| groupname | 文字列 | 招待先のグループの名前 |
| inviteruserid | 数字 | 招待者(既にグループに加入している人)のユーザid |
| inviteeuserid | 数字 | 被招待者(まだグループに加入していない人)のユーザid |
| updateAt | 文字列 | この招待レコードが更新された日時を表す タイムゾーンなし |
| createdAt | 文字列 | この招待レコードが作成された日時を表す タイムゾーンなし |

### サーバ内の状態変化

## 特定の招待を拒否

| 認証の有無 | HTTPメソッド | URI末尾 |
----|----|----
| 有り | DELETE | `/authed/invitations/:id` |

`:id`は招待id(数字)に置き換える

被招待者(invitee)がリクエストした本人であるときのみ実行できる。

当該の招待レコードを削除する。実行すると、今後この招待レコードを参照できない。

(再度同じグループに加盟したい場合は新しく招待を発行して貰う必要がある。)

### リクエストbody

無し

### レスポンスbody

無し(HTTPステータスコード:204)が返る

### サーバ内の状態変化

inviteeのgroupidが書き換えられる

当該の紹介レコードが削除される

## 特定の招待を承諾

被招待者(invitee)がリクエストした本人であるときのみ実行できる。

| 認証の有無 | HTTPメソッド | URI末尾 |
----|----|----
| 有り | DELETE | `/authed/invitations/:id?agreement=true` |

`:id`は招待id(数字)に置き換える

### リクエストbody

無し

### レスポンスbody

無し(HTTPステータスコード:204)が返る

### サーバ内の状態変化

inviteeのgroupidが書き換えられる

当該の紹介レコードが削除される

[エンドポイントのもくじに戻る](index.md)
